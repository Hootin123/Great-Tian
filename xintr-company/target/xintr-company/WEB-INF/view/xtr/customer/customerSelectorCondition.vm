<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title></title>
    #parse("comm/head.vm")
    <link rel="stylesheet" type="text/css" href="#springUrl('/resource/css/customer/customerSelector.css')"/>
    <link rel="stylesheet" type="text/css" href="#springUrl('/resource/js/plugins/laydate/need/laydate.css')"/>
    <script src="#springUrl('/resource/js/plugins/laydate/laydate.js')"></script>
    <script src="#springUrl('/resource/js/comm/validateUtil.js')"></script>
    <style>
        form, table{
            width:500px;
            margin: 40px auto;
        }
        table tr{
            width:100%;
            height:75px;

        }
        table tr input{
            display: block;

            width:260px;
            height:26px;
            border: 1px solid #d3e0f1;
            border-radius: 6px;
            text-indent: 6px;
        }
        table tr select{
            width: 260px;
            height:24px;
            border: 1px solid #d3e0f1;
            border-radius: 6px;
        }
        table tr .Name{
            width: 80px;
        }
        .okBtn{
            width: 200px;
            height: 40px;
            border: 0;
            border-radius: 6px;
            font-size: 16px;
            color: #fff;
            background: #0696fa;
            float: left;
            cursor: pointer;
        }
        table td{
            position: relative;
        }
        .tit{
            position: absolute;
            left:10px;
            top:50px;
            width:240px;
            height:36px;
            margin-top: 10px;
            background:rgba(0,0,0,0.2);
            border-radius: 3px;
            display: none;
            z-index: 10;
        }
        .tit span{
            display: block;
            float: left;
            width:100px;
            height: 26px;
            margin-top: 5px;
            background: #5b7798;
            border-radius: 5px;
            margin-left: 10px;
            font-size: 14px;
            color: #fff;
            text-align: center;
            line-height: 26px;
            cursor: pointer;

        }
        .tit b{
            width:20px;
            height: 20px;
            border-radius: 50%;
            position: absolute;
            right:-13px;
            top:-6px;
            cursor: pointer;
            color: #555;
        }
        .tit1 span{
            width:45px;

        }

        .customerDepName{
            position: relative;
        }
        .customerDepName b{
            width:25px;
            height:25px;
            background:url(/resource/img/customer/list.png) 0 0 no-repeat;
            position: absolute;
            right: 160px;
            top:28px;
            cursor: pointer;
        }

        .customerDepName .branch{
            width:150px;
            position: absolute;
            right: 30px;
            top:45px;
            background: rgba(242, 242, 242, 1);
            z-index: 10;
        ;}
        .customerDepName .branch h4{
            width:150px;
            height:30px;
            border-bottom: 1px solid #ccc;
            line-height: 30px;
            text-indent: 5px;
            font-size: 15px;
            font-weight: 600;
            background: #e7edf5;
            color: #666;

        }
        .customerDepName .branch ul{

            padding-left: 10px;
            margin-bottom: 2px;
            cursor: pointer;


        }
        .customerDepName .branch ul li{

            margin-left: 20px;
            color: #5b7798;
            cursor: pointer;
        }
    </style>
</head>
<body>
<form>
    <table>
        <tr>
            <td class="Name">聘用形式:</td>
            <td>
##                <select id="stationEmployMethod">
##                    <option value=""></option>
##                    <option value="1">正式</option>
##                    <option value="2">劳务</option>
##                </select>
                <input type="text" readonly>
                <input type="hidden" id="stationEmployMethod">
                <div class="tit">
                    <b>x</b>
                    <span>正式</span>
                    <span>劳务</span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="Name">员工状态:</td>
            <td>
##                <select id="stationCustomerState">
##                    <option value=""></option>
##                    <option value="1">在职</option>
####                    <option value="2">转正</option>
##                    <option value="3">离职</option>
####                    <option value="4">删除</option>
##                </select>
                <input type="text" readonly>
                <input type="hidden" id="stationCustomerState">
                <div class="tit">
                    <b>x</b>
                    <span>在职</span>
##                    <span>转正</span>
                    <span>离职</span>
##                    <span>删除</span>
                </div>
            </td>
        </tr>
        <tr>
            <td class="Name">部门:</td>
##            <td>
##                <input type="text" id="stationDeptId">
##                <input type="hidden" id="stationDeptName">
##            </td>
            <td class="customerDepName customerDepName1">
                <input type="text" id="stationDeptName" name="stationDeptName"  readonly/>
                <input type="hidden" id="stationDeptId" name="stationDeptId" />
                <b></b>
                <div class="branch" style="display: none">
                    <h4>部门</h4>
                    <div id="dep-base"></div>
                </div>
            </td>
        </tr>
        <tr>
            <td class="Name">性别:</td>
            <td>
##                <select id="customerSex">
##                    <option value=""></option>
##                    <option value="1">男</option>
##                    <option value="0">女</option>
##                </select>
                <input type="text" readonly>
                <input type="hidden"  id="customerSex">
                <div class="tit">
                    <b>x</b>
                    <span>男</span>
                    <span>女</span>
                </div>
            </td>
        </tr>
    </table>
    <div style="width: 200px ;margin:50px auto;">
        <input class="okBtn" type="button" value="确认" />
    </div>

</form>
</body>
<script>

    $(function () {
        // 绑定确定按钮事件
        $('.okBtn').on('click', function () {
            addMembers();
        });

        /**部门的数据接口 start**/
        $.get(BASE_PATH + '/dept/tree.htm', {}, function(data){
            if (data.success) {
                // DeptExtend.initTree(data.data);
                console.log(data.date);
                dg($("#dep-base"), data.data)
            } else {
                showWarning(data.message);
            }
        });
        /**部门的数据接口 end**/
        function dg(parent, data){
            var title = '<span class="dep-item" data-depid="'+data.depId+'">' + data.depName + '</span>';
            parent.append(title);
            if(data.children && data.children.length > 0){
                var ul = $("<ul>");
                $.each(data.children, function(index, item){
                    var li =$("<li>")
                    dg(li, item)
                    ul.append(li);
                })
                parent.append(ul);
            }
            $('.dep-item').unbind("click").on('click',function(){
                console.log(2)
                $('#stationDeptName').val($(this).html());
                $('#stationDeptId').val($(this).data("depid"));
                $('.customerDepName b').click();
            })
        }



        $('.customerDepName').on('click',function(){
            $('.branch').toggle();
            $('.branch li').toggle();
            $('.branch').find("li").toggle();
            $(this).parent().siblings().find('td').on('click',function(){
                console.log(2)
                $('.branch').hide();
            })

        });
    });
    /**
     * 筛选用户
     */
    function addMembers() {
        var stationCustomerState=$("#stationCustomerState").val();
        var stationEmployMethod=$("#stationEmployMethod").val();
        var customerSex=$("#customerSex").val();
        var stationDeptId=$("#stationDeptId").val();
        var stationDeptName=$("#stationDeptName").val();
        parent.loadCustomerTab(stationCustomerState,stationEmployMethod,customerSex,stationDeptId,stationDeptName);
        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
        parent.layer.close(index);
    }


    // 出现
    $("td input").on('click',function(){
        $(this).parent().find('.tit').show();
        $(this).parent().parent().siblings().find('.tit').hide()
    });
    $(".tit span").on('click',function(){
        var Txt=$(this).html();
        console.log(Txt);
        $(this).parent().parent().find("input[type='text']").val(Txt);
        if(Txt==="正式"){
            $(this).parent().parent().find("input[type='hidden']").val(1);
        }else if(Txt==="劳务"){
            $(this).parent().parent().find("input[type='hidden']").val(2);
        }else if(Txt==="在职"){
            $(this).parent().parent().find("input[type='hidden']").val(1);
        }else if(Txt==="离职"){
            $(this).parent().parent().find("input[type='hidden']").val(3);
        }else if(Txt==="男"){
            $(this).parent().parent().find("input[type='hidden']").val(1);
        }else if(Txt==="女"){
            $(this).parent().parent().find("input[type='hidden']").val(0);
        }
        $(this).parent().hide()
    });
    $(".tit b").on('click',function(){
        $(this).parent().hide();
        $(this).parent().parent().find("input[type='text']").val("");
        $(this).parent().parent().find("input[type='hidden']").val("");
    });
</script>
</html>