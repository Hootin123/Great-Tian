<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>签约申请</title>
    #parse("comm/head.vm")
    <style type="text/css">
        .header1{
            width: 100%;
            min-width: 1000px;
            height: 80px;
            margin-bottom:50px;
        }
        .header1 h4{
            width: 100%;
            height: 100%;
            font-size: 24px;
            font-family: '微软雅黑';
            text-align: center;
            line-height: 80px;
            border-bottom: 1px solid #dbe9ee
        }
        .section1 {
            width: 80%;
            margin:0 auto;
        }
        .section1 .left{
            width: 20%;
            float: left;
            background: #f1f9fc;
            color: #666;
        }
        .section1 .left li{
            width: 100%;
            height: 50px;
            border-top: 1px solid #dbe9ee;
            line-height: 50px;
            text-align: center;
            font-size: 14px;
            border-left: 1px solid #dbe9ee;
        }
        .section1 .right1{
            width: 80%;
            float: left;
            background: #f1f9fc;
            color: #666;
        }

        .section1 .right1 li{
            position: relative;
            border-top: 1px solid #dbe9ee;
            border-left: 1px solid #dbe9ee;
            border-right: 1px solid #dbe9ee;
        }
        .section1 .right1 li input{
            width: 94.9%;
            height: 50px;
            border: 0;
            font-size: 14px;
            padding-left: 5%;
            font-family: '微软雅黑';
            line-height: 50px;
        }
        .section1 .right1 .last ,.section1 .left .last{
            border-bottom: 1px solid #dbe9ee;
        }


        .section1 .title{
            width: 100%;
            height: 50px;
            font-size: 16px;
            font-family: '微软雅黑';
            font-weight: 600;
            text-indent: 20px;
            line-height: 60px;
            color: #f99b15;

        }

        .section1 textarea{
            width: 100%;
            height: 300px;
            position: relative;
            top: 60px;
            border: 1px solid #dbe9ee;
            line-height:30px;
            text-indent: 28px;
            font-size: 14px;
        }


        .section1 .right1 li .error {
            opacity: 1;
            filter: alpha(opacity=100);
            max-width: 500px;
            min-height: 20px;
            position: absolute;
            top: 5px;
            right: 60px;
            background-color: #ffe9eb;
            padding: 10px 18px;
            z-index: 10;
            border-radius: 5px;
            color: #fc2736;
            font-size: 12px;
            line-height: 20px;
        }

        .error:before {
            content: "";
            display: block;
            border-width: 12px 24px;
            position: absolute;
            top: 8px;
            left: -36px;
            border-style: solid dashed dashed;
            border-color: transparent #ffe9eb transparent transparent;
            font-size: 0;
            line-height: 0;
        }
        .footer1{
            width: 80%;
            margin: 0 auto 40px;
            height: 80px;
            background: #f1f9fc;
            border: 1px solid #dbe9ee;
            position: relative;
            overflow: hidden;
            top: 100px;
            min-width: 1200px;
        }
        .footer1 .signBottom{
            width: 400px;
            height: 40px;
            margin: 20px auto;
            border: 0;
            float: none;
            position: relative;
        }
        .footer1 .signBottom .signBtnPre{
            display: block;
            width: 240px;
            height: 40px;
            border: 0;
            border-radius: 6px;
            font-size: 16px;
            color: #fff;
            background: #0696fa;
            float: left;
            cursor: pointer;
            font-family: "微软雅黑";
            margin: 0;
        }

        .footer1 .signBottom .signBtnClose{
            display: block;
            width: 140px;
            height: 40px;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            background: #FFFFFF;
            border: 1px solid #0696fa;
            color: #0696fa;
            font-family: "微软雅黑";
            bottom: 0;
            top: 0;
            margin: auto;
            right: 0
        }
        .layui-layer-setwin {
            position: absolute;
            right: 60px !important;
            top: 50px !important;
            font-size: 0;
            line-height: initial;
        }
        .header1 .closed{
            width: 30px;
            height: 30px;
            display: block;
            background: url(resource/img/popupboxclosed.png) no-repeat center center;
            position: absolute;
            top: 25px;
            right: 40px;
            cursor: pointer;
        }

    </style>
</head>
<body>
<div class='header1'>
    <h4>合同资料 <b class="closed"></b></h4>
</div>
<div class="section1">
    <form id="collaborationForm">
        <input name="collaborationContractType"  type="hidden" value="$!{type}"/>
        <input name="collaborationCompanyId" type="hidden" value="$!{companyId}"/>
        <div class="left">
            <ul>
                <li>公司名称</li>
                <li>申请内容</li>
                <li>合同邮寄地址</li>
                <li>联系人姓名</li>
                <li class='last'>联系电话</li>
            </ul>
        </div>
        <div class="right1">
            <li><input type="text" name="itemName" value='$!{companyName}' readonly="readonly"></li>
            <li>
                <input type="text" name="collaborationContractTypeName"  value='$!{typeStr}' readonly="readonly">
                <span></span>
            </li>
            <li class='mailingAddress'>
                <input type="text" name="collaborationContractAddress" placeholder="请填写邮寄地址(2-50个字符)">
                <span></span>
            </li>
            <li class='linkman'>
                <input type="text" name="collaborationRelationerName" placeholder="请填写联系人姓名(2-50个字符)">
                <span></span>
            </li>
            <li class='last linkPhone'>
                <input type="text" name="collaborationRelationerPhone" placeholder="请填写联系人电话">
                <span></span>
            </li>
        </div>
##        <div class="title">合同内容:</div>
##        <textarea class='text'></textarea>
    </form>
</div>
<!-- ***小弹窗***-->
<div class="signUp" style="display: none">
    您的签约申请已提交成功
</div>
<div class="footer1">
    <div class="signBottom">
        <input type="button" name="" class="signBtnPre" value="确认">
        <input style="float:right;" type="button" name=""  id="cancel" class=" signBtnClose popupbox-closed" value="取消" "="">
    </div>
</div>
<script type="text/javascript">
    var faddress = false, flinkman = false, flinkPhone = false;
    // 验证邮件地址
    $('.mailingAddress input').blur(function(){
        testMailingAddress()
    })

    function testMailingAddress(){
        if($('.mailingAddress input').val()=='' || $('.mailingAddress input').val()==undefined){
            $('.mailingAddress span').html('请填写邮寄地址').addClass('error').show();
            faddress = false;
        }
        else if($(".mailingAddress input").val().length>=2 && $(".mailingAddress input").val().length<=50){
            $('.mailingAddress span').html('').removeClass('error');
            faddress = true;
        }
        else{
            $('.mailingAddress span').html('请输入正确的地址').addClass('error').show();
            faddress = false;
        }
    }
    // 验证联系人

    $('.linkman input').blur(function(){
        testLinkman()
    })

    function testLinkman(){
        if($('.linkman input').val()=='' || $('.linkman input').val()==undefined){
            $('.linkman span').html('请填写联系人姓名').addClass('error').show();
            flinkman = false;
        }
        else if($(".linkman input").val().length>=2 && $(".linkman input").val().length<=50){
            $('.linkman span').html('').removeClass('error');
            flinkman = true;
        }
        else{
            $('.linkman span').html('请输入正确的联系人姓名').addClass('error').show();
            flinkman = false;
        }
    }


    //....验证联系人电话

    $('.linkPhone input').blur(function(){
        testLinkPhone();
    });
    function testLinkPhone(){
        if($(".linkPhone input").val()=='' || $(".linkPhone input").val()==undefined ){
            $('.linkPhone span').html('请输入联系电话').addClass('error').show();
            flinkPhone = false;
        }
        else if($(".linkPhone input").val().length>=2 && $(".linkPhone input").val().length<=30){
            $('.linkPhone span').html('').removeClass('error').hide();
            flinkPhone = true;
        }
        else{
            $('.linkPhone span').html('请输入正确的电话').addClass('error').show();
            flinkPhone = false;
        }
    }

    // 确认
    $('.signBtnPre').on('click',function(){

        testMailingAddress();
        testLinkman();
        testLinkPhone();
        if(faddress&&flinkman&&flinkPhone){
            $.ajax({
                url:BASE_PATH+'/addSureProtocol.htm',
                type:'post',
                data:$("#collaborationForm").serialize(),
                dataType:'json',
                success:function(data){
                    if(data.success){
                        window.parent.textA();
                        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
                        parent.layer.close(index);

                    }else{
                        alert(data.message);
                    }
                }

            });
        }

    });

    $("#cancel").click(function(){
        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
        parent.layer.close(index);

    });
    $(".closed").click(function(){
        var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
        parent.layer.close(index);

    });
</script>
</body>
</html>