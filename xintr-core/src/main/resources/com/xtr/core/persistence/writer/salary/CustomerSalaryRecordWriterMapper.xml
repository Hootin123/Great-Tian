<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.writer.salary.CustomerSalaryRecordWriterMapper">

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from customer_salary_record
        where salary_record_id = #{salaryRecordId,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.xtr.api.domain.salary.CustomerSalaryRecordBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into customer_salary_record (salary_record_id, customer_id, old_salary,
        new_salary, effective_date, reason,
        create_time, create_user, state
        )
        values (#{salaryRecordId,jdbcType=BIGINT}, #{customerId,jdbcType=BIGINT}, #{oldSalary,jdbcType=DECIMAL},
        #{newSalary,jdbcType=DECIMAL}, #{effectiveDate,jdbcType=DATE}, #{reason,jdbcType=VARCHAR},
        #{createTime,jdbcType=TIMESTAMP}, #{createUser,jdbcType=BIGINT}, #{state,jdbcType=INTEGER}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.xtr.api.domain.salary.CustomerSalaryRecordBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into customer_salary_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="salaryRecordId != null">
                salary_record_id,
            </if>
            <if test="customerId != null">
                customer_id,
            </if>
            <if test="oldSalary != null">
                old_salary,
            </if>
            <if test="newSalary != null">
                new_salary,
            </if>
            <if test="effectiveDate != null">
                effective_date,
            </if>
            <if test="reason != null">
                reason,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="createUser != null">
                create_user,
            </if>
            <if test="state != null">
                state,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="salaryRecordId != null">
                #{salaryRecordId,jdbcType=BIGINT},
            </if>
            <if test="customerId != null">
                #{customerId,jdbcType=BIGINT},
            </if>
            <if test="oldSalary != null">
                #{oldSalary,jdbcType=DECIMAL},
            </if>
            <if test="newSalary != null">
                #{newSalary,jdbcType=DECIMAL},
            </if>
            <if test="effectiveDate != null">
                #{effectiveDate,jdbcType=DATE},
            </if>
            <if test="reason != null">
                #{reason,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUser != null">
                #{createUser,jdbcType=BIGINT},
            </if>
            <if test="state != null">
                #{state,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.xtr.api.domain.salary.CustomerSalaryRecordBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update customer_salary_record
        <set>
            <if test="customerId != null">
                customer_id = #{customerId,jdbcType=BIGINT},
            </if>
            <if test="oldSalary != null">
                old_salary = #{oldSalary,jdbcType=DECIMAL},
            </if>
            <if test="newSalary != null">
                new_salary = #{newSalary,jdbcType=DECIMAL},
            </if>
            <if test="effectiveDate != null">
                effective_date = #{effectiveDate,jdbcType=DATE},
            </if>
            <if test="reason != null">
                reason = #{reason,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createUser != null">
                create_user = #{createUser,jdbcType=BIGINT},
            </if>
            <if test="state != null">
                state = #{state,jdbcType=INTEGER},
            </if>
        </set>
        where salary_record_id = #{salaryRecordId,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.xtr.api.domain.salary.CustomerSalaryRecordBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update customer_salary_record
        set customer_id = #{customerId,jdbcType=BIGINT},
        old_salary = #{oldSalary,jdbcType=DECIMAL},
        new_salary = #{newSalary,jdbcType=DECIMAL},
        effective_date = #{effectiveDate,jdbcType=DATE},
        reason = #{reason,jdbcType=VARCHAR},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        create_user = #{createUser,jdbcType=BIGINT},
        state = #{state,jdbcType=INTEGER}
        where salary_record_id = #{salaryRecordId,jdbcType=BIGINT}
    </update>

    <!--调薪删除当前时间之后的调薪记录-->
    <delete id="deleteByUpdateSalary">
        delete from customer_salary_record
        WHERE
        customer_id = #{customerId}
        and
        effective_date > #{effDate}
    </delete>
</mapper>