<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.reader.account.SubAccountReaderMapper">
    <resultMap id="BaseResultMap" type="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="cust_id" property="custId" jdbcType="BIGINT"/>
        <result column="amout" property="amout" jdbcType="DECIMAL"/>
        <result column="cash_amout" property="cashAmout" jdbcType="DECIMAL"/>
        <result column="uncash_amount" property="uncashAmount" jdbcType="DECIMAL"/>
        <result column="freeze_cash_amount" property="freezeCashAmount" jdbcType="DECIMAL"/>
        <result column="freeze_unCash_amount" property="freezeUncashAmount" jdbcType="DECIMAL"/>
        <result column="property" property="property" jdbcType="INTEGER"/>
        <result column="state" property="state" jdbcType="CHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="check_value" property="checkValue" jdbcType="VARCHAR"/>
        <result column="hash" property="hash" jdbcType="VARCHAR"/>
        <result column="is_auto_transfer" property="isAutoTransfer" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Example_Where_Clause">
        <if test="custId != null">
            AND cust_id = #{custId,jdbcType=BIGINT}
        </if>
        <if test="amout != null">
            AND amout = #{amout,jdbcType=DECIMAL}
        </if>
        <if test="cashAmout != null">
            AND cash_amout = #{cashAmout,jdbcType=DECIMAL}
        </if>
        <if test="uncashAmount != null">
            AND uncash_amount = #{uncashAmount,jdbcType=DECIMAL}
        </if>
        <if test="freezeCashAmount != null">
            AND freeze_cash_amount = #{freezeCashAmount,jdbcType=DECIMAL}
        </if>
        <if test="freezeUncashAmount != null">
            AND freeze_unCash_amount = #{freezeUncashAmount,jdbcType=DECIMAL}
        </if>
        <if test="property != null">
            AND property = #{property,jdbcType=INTEGER}
        </if>
        <if test="state != null">
            AND state = #{state,jdbcType=CHAR}
        </if>
        <if test="createTime != null">
            AND create_time = #{createTime,jdbcType=TIMESTAMP}
        </if>
        <if test="updateTime != null">
            AND update_time = #{updateTime,jdbcType=TIMESTAMP}
        </if>
        <if test="checkValue != null">
            AND check_value = #{checkValue,jdbcType=VARCHAR}
        </if>
        <if test="hash != null">
            AND hash = #{hash,jdbcType=VARCHAR}
        </if>
        <if test="isAutoTransfer != null">
            AND is_auto_transfer = #{isAutoTransfer,jdbcType=INTEGER}
        </if>
    </sql>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, cust_id, amout, cash_amout, uncash_amount, freeze_cash_amount, freeze_unCash_amount,
        property, state, create_time, update_time, check_value, hash,is_auto_transfer
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from sub_account
        where id = #{id,jdbcType=BIGINT}
    </select>

    <!-- 根据客户Id获取账户信息-->
    <select id="selectByCustId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sub_account
        where cust_id = #{custId,jdbcType=BIGINT} AND property = #{property,jdbcType=INTEGER} limit 1
    </select>

    <!--根据custId查询账户信息-->
    <select id="selectSubAccountBean" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>
        from sub_account
        where 1=1
        <include refid="Example_Where_Clause"/>
    </select>

</mapper>