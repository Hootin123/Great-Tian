<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.reader.sys.SysUserReaderMapper">
    <resultMap id="BaseResultMap" type="com.xtr.api.domain.sys.SysUserBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="mobile_phone" property="mobilePhone" jdbcType="CHAR"/>
        <result column="email" property="email" jdbcType="VARCHAR"/>
        <result column="user_name" property="userName" jdbcType="VARCHAR"/>
        <result column="nick_name" property="nickName" jdbcType="VARCHAR"/>
        <result column="state" property="state" jdbcType="INTEGER"/>
        <result column="login_count" property="loginCount" jdbcType="INTEGER"/>
        <result column="login_time" property="loginTime" jdbcType="TIMESTAMP"/>
        <result column="is_delete" property="isDelete" jdbcType="INTEGER"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="create_user" property="createUser" jdbcType="BIGINT"/>
        <result column="update_user" property="updateUser" jdbcType="BIGINT"/>
        <result column="super_admin" property="superAdmin" jdbcType="INTEGER"/>
        <result column="pwd" property="pwd" jdbcType="VARCHAR"/>
        <result column="row_no" property="rowNo" jdbcType="INTEGER"/>
        <result column="salt" property="salt" jdbcType="VARCHAR"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, mobile_phone, email, user_name, nick_name, state, login_count, login_time, is_delete,
        create_time, update_time, create_user, update_user,super_admin,pwd,salt
    </sql>

    <!-- 查询条件 -->
    <sql id="Example_Where_Clause">
        <if test="id!=null and id!=''">
            AND id = #{id}
        </if>
        <if test="mobilePhone!=null and mobilePhone!=''">
            AND mobile_phone = #{mobilePhone}
        </if>
        <if test="email!=null and email!=''">
            AND email = #{email}
        </if>
        <if test="userName!=null and userName!=''">
            AND user_name = #{userName}
        </if>
        <if test="nickName!=null and nickName!=''">
            AND nick_name = #{nickName}
        </if>
        <if test="state!=null and state!=''">
            AND state = #{state}
        </if>
        <if test="loginCount!=null and loginCount!=''">
            AND login_count = #{loginCount}
        </if>
        <if test="loginTime!=null and loginTime!=''">
            AND login_time = #{loginTime}
        </if>
        <if test="isDelete!=null and isDelete!=''">
            AND is_delete = #{isDelete}
        </if>
        <if test="createTime!=null and createTime!=''">
            AND create_time = #{createTime}
        </if>
        <if test="updateTime!=null and updateTime!=''">
            AND update_time = #{updateTime}
        </if>
        <if test="createUser!=null and createUser!=''">
            AND create_user = #{createUser}
        </if>
        <if test="updateUser!=null and updateUser!=''">
            AND update_user = #{updateUser}
        </if>
        <if test="superAdmin!=null and superAdmin!=''">
            AND super_admin = #{superAdmin}
        </if>
        <if test="pwd!=null and pwd!=''">
            AND pwd = #{pwd}
        </if>
        <if test="salt!=null and salt!=''">
            AND salt = #{salt}
        </if>

    </sql>

    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from sys_user
        where id = #{id,jdbcType=BIGINT}
    </select>

    <!-- 分页查询用户信息-->
    <select id="listPage" resultMap="BaseResultMap" parameterType="com.xtr.api.domain.sys.SysUserBean">
        SELECT
        <include refid="Base_Column_List"/>
        FROM sys_user
        WHERE is_delete = 0
        <include refid="Example_Where_Clause"/>
        ORDER BY create_time DESC
    </select>

    <!-- 根据手机号或邮箱地址查询用户信息-->
    <select id="selectByEmailOrPhone" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM sys_user
        WHERE is_delete = 0
        AND (email = #{userName} or mobile_phone = #{userName})
        <if test="id!=null and id!= '' ">
            AND id != #{id}
        </if>
    </select>

</mapper>