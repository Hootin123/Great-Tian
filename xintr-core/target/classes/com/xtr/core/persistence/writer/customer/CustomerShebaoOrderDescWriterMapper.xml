<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.writer.customer.CustomerShebaoOrderDescWriterMapper" >
  <resultMap id="BaseResultMap" type="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="company_shebao_order_id" property="companyShebaoOrderId" jdbcType="BIGINT" />
    <result column="customer_id" property="customerId" jdbcType="BIGINT" />
    <result column="gjj_zy_text" property="gjjZyText" jdbcType="VARCHAR" />
    <result column="gjj_hj_text" property="gjjHjText" jdbcType="VARCHAR" />
    <result column="gjj_bj_text" property="gjjBjText" jdbcType="VARCHAR" />
    <result column="gjj_tj_text" property="gjjTjText" jdbcType="VARCHAR" />
    <result column="gjj_stop_text" property="gjjStopText" jdbcType="VARCHAR" />
    <result column="sb_zy_text" property="sbZyText" jdbcType="VARCHAR" />
    <result column="sb_hj_text" property="sbHjText" jdbcType="VARCHAR" />
    <result column="sb_bj_text" property="sbBjText" jdbcType="VARCHAR" />
    <result column="sb_tj_text" property="sbTjText" jdbcType="VARCHAR" />
    <result column="sb_stop_text" property="sbStopText" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, company_shebao_order_id, customer_id, gjj_zy_text, gjj_hj_text, gjj_bj_text, gjj_tj_text,
    gjj_stop_text, sb_zy_text, sb_hj_text, sb_bj_text, sb_tj_text, sb_stop_text
  </sql>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from customer_shebao_order_desc
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into customer_shebao_order_desc (id, company_shebao_order_id, customer_id,
    gjj_zy_text, gjj_hj_text, gjj_bj_text, gjj_tj_text,
    gjj_stop_text, sb_zy_text, sb_hj_text, sb_bj_text,
    sb_tj_text, sb_stop_text)
    values (#{id,jdbcType=BIGINT}, #{companyShebaoOrderId,jdbcType=BIGINT}, #{customerId,jdbcType=BIGINT},
    #{gjjZyText,jdbcType=VARCHAR}, #{gjjHjText,jdbcType=VARCHAR}, #{gjjBjText,jdbcType=VARCHAR}, #{gjjTjText,jdbcType=VARCHAR},
    #{gjjStopText,jdbcType=VARCHAR}, #{sbZyText,jdbcType=VARCHAR}, #{sbHjText,jdbcType=VARCHAR}, #{sbBjText,jdbcType=VARCHAR},
    #{sbTjText,jdbcType=VARCHAR}, #{sbStopText,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into customer_shebao_order_desc
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="companyShebaoOrderId != null" >
        company_shebao_order_id,
      </if>
      <if test="customerId != null" >
        customer_id,
      </if>
      <if test="gjjZyText != null" >
        gjj_zy_text,
      </if>
      <if test="gjjHjText != null" >
        gjj_hj_text,
      </if>
      <if test="gjjBjText != null" >
        gjj_bj_text,
      </if>
      <if test="gjjTjText != null" >
        gjj_tj_text,
      </if>
      <if test="gjjStopText != null" >
        gjj_stop_text,
      </if>
      <if test="sbZyText != null" >
        sb_zy_text,
      </if>
      <if test="sbHjText != null" >
        sb_hj_text,
      </if>
      <if test="sbBjText != null" >
        sb_bj_text,
      </if>
      <if test="sbTjText != null" >
        sb_tj_text,
      </if>
      <if test="sbStopText != null" >
        sb_stop_text,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="companyShebaoOrderId != null" >
        #{companyShebaoOrderId,jdbcType=BIGINT},
      </if>
      <if test="customerId != null" >
        #{customerId,jdbcType=BIGINT},
      </if>
      <if test="gjjZyText != null" >
        #{gjjZyText,jdbcType=VARCHAR},
      </if>
      <if test="gjjHjText != null" >
        #{gjjHjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjBjText != null" >
        #{gjjBjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjTjText != null" >
        #{gjjTjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjStopText != null" >
        #{gjjStopText,jdbcType=VARCHAR},
      </if>
      <if test="sbZyText != null" >
        #{sbZyText,jdbcType=VARCHAR},
      </if>
      <if test="sbHjText != null" >
        #{sbHjText,jdbcType=VARCHAR},
      </if>
      <if test="sbBjText != null" >
        #{sbBjText,jdbcType=VARCHAR},
      </if>
      <if test="sbTjText != null" >
        #{sbTjText,jdbcType=VARCHAR},
      </if>
      <if test="sbStopText != null" >
        #{sbStopText,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update customer_shebao_order_desc
    <set >
      <if test="companyShebaoOrderId != null" >
        company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT},
      </if>
      <if test="customerId != null" >
        customer_id = #{customerId,jdbcType=BIGINT},
      </if>
      <if test="gjjZyText != null" >
        gjj_zy_text = #{gjjZyText,jdbcType=VARCHAR},
      </if>
      <if test="gjjHjText != null" >
        gjj_hj_text = #{gjjHjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjBjText != null" >
        gjj_bj_text = #{gjjBjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjTjText != null" >
        gjj_tj_text = #{gjjTjText,jdbcType=VARCHAR},
      </if>
      <if test="gjjStopText != null" >
        gjj_stop_text = #{gjjStopText,jdbcType=VARCHAR},
      </if>
      <if test="sbZyText != null" >
        sb_zy_text = #{sbZyText,jdbcType=VARCHAR},
      </if>
      <if test="sbHjText != null" >
        sb_hj_text = #{sbHjText,jdbcType=VARCHAR},
      </if>
      <if test="sbBjText != null" >
        sb_bj_text = #{sbBjText,jdbcType=VARCHAR},
      </if>
      <if test="sbTjText != null" >
        sb_tj_text = #{sbTjText,jdbcType=VARCHAR},
      </if>
      <if test="sbStopText != null" >
      sb_stop_text = #{sbStopText,jdbcType=VARCHAR},
    </if>
      <if test="orderErrorText != null" >
        order_error_text = #{orderErrorText,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update customer_shebao_order_desc
    set company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT},
    customer_id = #{customerId,jdbcType=BIGINT},
    gjj_zy_text = #{gjjZyText,jdbcType=VARCHAR},
    gjj_hj_text = #{gjjHjText,jdbcType=VARCHAR},
    gjj_bj_text = #{gjjBjText,jdbcType=VARCHAR},
    gjj_tj_text = #{gjjTjText,jdbcType=VARCHAR},
    gjj_stop_text = #{gjjStopText,jdbcType=VARCHAR},
    sb_zy_text = #{sbZyText,jdbcType=VARCHAR},
    sb_hj_text = #{sbHjText,jdbcType=VARCHAR},
    sb_bj_text = #{sbBjText,jdbcType=VARCHAR},
    sb_tj_text = #{sbTjText,jdbcType=VARCHAR},
    sb_stop_text = #{sbStopText,jdbcType=VARCHAR},
    order_error_text = #{orderErrorText,jdbcType=VARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>

  <select id="selectByCompanyOrderIdAndCustomerId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from customer_shebao_order_desc
    where company_shebao_order_id = #{companyOrderId}
    and customer_id = #{customerId} limit 1
  </select>

  <!--批量查询员工社保公积金汇总信息-->
  <select id="selectBatchByCustomerAndCompanyOrder" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from customer_shebao_order_desc
    where company_shebao_order_id =#{companyOrderId}
    and customer_id in (${customerId})
  </select>

  <!--批量新增员工社保公积金汇总信息-->
  <insert id="insertBatch" parameterType="java.util.List" >
    insert into customer_shebao_order_desc (id, company_shebao_order_id, customer_id,
    gjj_hj_text, gjj_bj_text, gjj_tj_text,
    gjj_stop_text, sb_hj_text, sb_bj_text,
    sb_tj_text, sb_stop_text)
    values
    <foreach collection="list" item="item" index="index" separator=",">
      (#{item.id,jdbcType=BIGINT}, #{item.companyShebaoOrderId,jdbcType=BIGINT}, #{item.customerId,jdbcType=BIGINT},
      #{item.gjjHjText,jdbcType=VARCHAR}, #{item.gjjBjText,jdbcType=VARCHAR}, #{item.gjjTjText,jdbcType=VARCHAR},
      #{item.gjjStopText,jdbcType=VARCHAR}, #{item.sbHjText,jdbcType=VARCHAR}, #{item.sbBjText,jdbcType=VARCHAR},
      #{item.sbTjText,jdbcType=VARCHAR}, #{item.sbStopText,jdbcType=VARCHAR})
    </foreach>
  </insert>

  <!--批量更新员工社保公积金汇总信息-->
  <update id="updateBatch" parameterType="java.util.List" >
    <foreach collection="list" item="item" index="index" open="" close="" separator=";">
      update customer_shebao_order_desc
      set company_shebao_order_id = #{item.companyShebaoOrderId,jdbcType=BIGINT},
      customer_id = #{item.customerId,jdbcType=BIGINT},
      gjj_hj_text = #{item.gjjHjText,jdbcType=VARCHAR},
      gjj_bj_text = #{item.gjjBjText,jdbcType=VARCHAR},
      gjj_tj_text = #{item.gjjTjText,jdbcType=VARCHAR},
      gjj_stop_text = #{item.gjjStopText,jdbcType=VARCHAR},
      sb_hj_text = #{item.sbHjText,jdbcType=VARCHAR},
      sb_bj_text = #{item.sbBjText,jdbcType=VARCHAR},
      sb_tj_text = #{item.sbTjText,jdbcType=VARCHAR},
      sb_stop_text = #{item.sbStopText,jdbcType=VARCHAR}
      where id = #{item.id,jdbcType=BIGINT}
    </foreach>
  </update>

  <!--批量更新员工的提交失败信息为空-->
  <update id="updateSbtStateBatch">
    update customer_shebao_order_desc
    set order_error_text = NULL
    where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item}
    </foreach>
  </update>


  <!--<update id="updateErrorTextBatchDetail">-->
    <!--update customer_shebao_order_desc-->
    <!--set order_error_text = NULL-->
    <!--where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id in-->
    <!--<foreach collection="list" item="item" index="index" open="(" separator="," close=")">-->
      <!--#{item}-->
    <!--</foreach>-->
  <!--</update>-->
  <!--<if test="i.orderErrorText!=null">-->
  <!--批量更新员工的提交失败信息-->
  <update id="updateErrorTextBatchDetail">
    update customer_shebao_order_desc
    <trim prefix="set" suffixOverrides=",">
      <trim prefix="order_error_text =case" suffix="end,">
        <foreach collection="list" item="i" index="index">
          <if test="i.orderErrorText!=null">
            when customer_id=#{i.customerId} then #{i.orderErrorText}
          </if>
        </foreach>
      </trim>
      <trim prefix=" sb_error_text =case" suffix="end,">
        <foreach collection="list" item="i" index="index">
          <if test="i.sbErrorText!=null">
            when customer_id=#{i.customerId} then #{i.sbErrorText}
          </if>
        </foreach>
      </trim>

      <trim prefix="gjj_error_text =case" suffix="end," >
        <foreach collection="list" item="i" index="index">
          <if test="i.gjjErrorText!=null">
            when customer_id=#{i.customerId} then #{i.gjjErrorText}
          </if>
        </foreach>
      </trim>

      <trim prefix="sb_error_reason =case" suffix="end," >
        <foreach collection="list" item="i" index="index">
          <if test="i.sbErrorReason!=null">
            when customer_id=#{i.customerId} then #{i.sbErrorReason}
          </if>
        </foreach>
      </trim>

      <trim prefix="gjj_error_reason =case" suffix="end," >
        <foreach collection="list" item="i" index="index">
          <if test="i.gjjErrorReason!=null">
            when customer_id=#{i.customerId} then #{i.gjjErrorReason}
          </if>
        </foreach>
      </trim>
    </trim>
    where  company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and
    (
    <foreach collection="list" separator="or" item="i" index="index">
      customer_id=#{i.customerId}
    </foreach>
    )
  </update>
<!--更新错误信息-->
  <!--<update id="updateErrorTextDetail" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean">-->
    <!--update customer_shebao_order_desc-->
    <!--set order_error_text =#{orderErrorText}-->
    <!--where  company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id=#{customerId}-->
  <!--</update>-->

  <!--取消社保公积金的异常信息-->
  <update id="updateErrorInfoEmpty">
    update customer_shebao_order_desc
    <set>
      <if test="type == 1" >
        sb_error_text = null,
        sb_error_reason = null
      </if>
      <if test="type == 2" >
        gjj_error_text = null,
        gjj_error_reason = null
      </if>
    </set>
    where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id=#{customerId,jdbcType=BIGINT}
  </update>

  <!--更新汇总数据错误信息-->
  <update id="updateErrorTextDetail" parameterType="com.xtr.api.domain.customer.CustomerShebaoOrderDescBean" >
    update customer_shebao_order_desc
    <set >
      <if test="orderErrorText != null" >
        order_error_text = #{orderErrorText,jdbcType=VARCHAR},
      </if>
      <if test="sbErrorText != null" >
        sb_error_text = #{sbErrorText,jdbcType=VARCHAR},
      </if>
      <if test="gjjErrorText != null" >
        gjj_error_text = #{gjjErrorText,jdbcType=VARCHAR},
      </if>
      <if test="sbErrorReason != null" >
        sb_error_reason = #{sbErrorReason,jdbcType=VARCHAR},
      </if>
      <if test="gjjErrorReason != null" >
        gjj_error_reason = #{gjjErrorReason,jdbcType=VARCHAR},
      </if>
    </set>
    where  company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id=#{customerId,jdbcType=BIGINT}
  </update>

  <!--取消订单时清空错误信息-->
  <update id="updateErrorInfoEmptyForCancelOrder" parameterType="java.lang.Long" >
    update customer_shebao_order_desc
    set   sb_error_text = null,
        sb_error_reason = null,
        gjj_error_text = null,
        gjj_error_reason = null,
        order_error_text=null
    where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT}
  </update>

  <!--取消社保公积金的异常信息-->
  <update id="updateErrorInfoEmptyBatch">
    update customer_shebao_order_desc
    <set>
      <if test="type == 1" >
        sb_error_text = null,
        sb_error_reason = null
      </if>
      <if test="type == 2" >
        gjj_error_text = null,
        gjj_error_reason = null
      </if>
    </set>
    where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item}
    </foreach>
  </update>
</mapper>
