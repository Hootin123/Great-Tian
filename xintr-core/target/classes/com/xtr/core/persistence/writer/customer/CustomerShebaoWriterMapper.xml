<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.writer.customer.CustomerShebaoWriterMapper" >
  <resultMap id="BaseResultMap" type="com.xtr.api.domain.customer.CustomerShebaoBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="customer_id" property="customerId" jdbcType="BIGINT" />
    <result column="company_id" property="companyId" jdbcType="BIGINT" />
    <result column="current_company_order_id" property="currentCompanyOrderId" jdbcType="BIGINT" />
    <result column="join_city_name" property="joinCityName" jdbcType="VARCHAR" />
    <result column="join_city_code" property="joinCityCode" jdbcType="VARCHAR" />
    <result column="sb_type" property="sbType" jdbcType="VARCHAR" />
    <result column="gjj_type" property="gjjType" jdbcType="VARCHAR" />
    <result column="sb_base" property="sbBase" jdbcType="DECIMAL" />
    <result column="gjj_base" property="gjjBase" jdbcType="DECIMAL" />
    <result column="sb_sbt_base" property="sbSbtBase" jdbcType="DECIMAL" />
    <result column="gjj_sbt_base" property="gjjSbtBase" jdbcType="DECIMAL" />
    <result column="sb_shebaotong_status" property="sbShebaotongStatus" jdbcType="INTEGER" />
    <result column="gjj_shebaotong_status" property="gjjShebaotongStatus" jdbcType="INTEGER" />
    <result column="is_sb_keep" property="isSbKeep" jdbcType="INTEGER" />
    <result column="is_gjj_keep" property="isGjjKeep" jdbcType="INTEGER" />
    <result column="sb_join_date" property="sbJoinDate" jdbcType="DATE" />
    <result column="gjj_join_date" property="gjjJoinDate" jdbcType="DATE" />
    <result column="sb_stop_date" property="sbStopDate" jdbcType="DATE" />
    <result column="gjj_stop_date" property="gjjStopDate" jdbcType="DATE" />
    <result column="current_month" property="currentMonth" jdbcType="DATE" />
    <result column="response_msg" property="responseMsg" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    id, customer_id, company_id, current_company_order_id, join_city_name, join_city_code, sb_type, sb_type_name, gjj_type, gjj_type_name, sb_base, gjj_base, sb_sbt_base, gjj_sbt_base, sb_shebaotong_status,
    id, customer_id, company_id, current_company_order_id, join_city_name, join_city_code, sb_type, gjj_type, sb_base, gjj_base, sb_shebaotong_status,
    gjj_shebaotong_status, is_sb_keep, is_gjj_keep, sb_join_date, gjj_join_date, sb_stop_date,
    gjj_stop_date, current_month, response_msg, create_time
  </sql>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from customer_shebao
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.xtr.api.domain.customer.CustomerShebaoBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into customer_shebao (id, customer_id, company_id, current_company_order_id, join_city_name,
      join_city_code, sb_type, sb_type_name, gjj_type, gjj_type_name, sb_base,
      gjj_base, sb_sbt_base, gjj_sbt_base, sb_shebaotong_status, gjj_shebaotong_status,
      is_sb_keep, is_gjj_keep, sb_join_date, 
      gjj_join_date, sb_stop_date, gjj_stop_date,
      current_month,
      response_msg, create_time)
    values (#{id,jdbcType=BIGINT}, #{customerId,jdbcType=BIGINT}, #{companyId,jdbcType=BIGINT}, #{currentCompanyOrderId,jdbcType=BIGINT}, #{joinCityName,jdbcType=VARCHAR},
      #{joinCityCode,jdbcType=VARCHAR}, #{sbType,jdbcType=VARCHAR}, #{sbTypeName,jdbcType=VARCHAR}, #{gjjType,jdbcType=VARCHAR}, #{gjjTypeName,jdbcType=VARCHAR}, #{sbBase,jdbcType=DECIMAL},
      #{gjjBase,jdbcType=DECIMAL}, #{sbSbtBase,jdbcType=DECIMAL},
      #{gjjSbtBase,jdbcType=DECIMAL}, #{sbShebaotongStatus,jdbcType=INTEGER}, #{gjjShebaotongStatus,jdbcType=INTEGER},
      #{isSbKeep,jdbcType=INTEGER}, #{isGjjKeep,jdbcType=INTEGER}, #{sbJoinDate,jdbcType=DATE}, 
      #{gjjJoinDate,jdbcType=DATE}, #{sbStopDate,jdbcType=DATE}, #{gjjStopDate,jdbcType=DATE}, #{currentMonth,jdbcType=DATE},
      #{responseMsg,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.xtr.api.domain.customer.CustomerShebaoBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into customer_shebao
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="customerId != null" >
        customer_id,
      </if>
      <if test="companyId != null" >
        company_id,
      </if>
      <if test="currentCompanyOrderId != null" >
        current_company_order_id,
      </if>
      <if test="joinCityName != null" >
        join_city_name,
      </if>
      <if test="joinCityCode != null" >
        join_city_code,
      </if>
      <if test="sbType != null" >
        sb_type,
      </if>
      <if test="sbTypeName != null" >
        sb_type_name,
      </if>
      <if test="gjjType != null" >
        gjj_type,
      </if>
      <if test="gjjTypeName != null" >
        gjj_type_name,
      </if>
      <if test="sbBase != null" >
        sb_base,
      </if>
      <if test="gjjBase != null" >
        gjj_base,
      </if>
      <if test="sbSbtBase != null" >
        sb_sbt_base,
      </if>
      <if test="gjjSbtBase != null" >
        gjj_sbt_base,
      </if>
      <if test="sbShebaotongStatus != null" >
        sb_shebaotong_status,
      </if>
      <if test="gjjShebaotongStatus != null" >
        gjj_shebaotong_status,
      </if>
      <if test="isSbKeep != null" >
        is_sb_keep,
      </if>
      <if test="isGjjKeep != null" >
        is_gjj_keep,
      </if>
      <if test="sbJoinDate != null" >
        sb_join_date,
      </if>
      <if test="gjjJoinDate != null" >
        gjj_join_date,
      </if>
      <if test="sbStopDate != null" >
        sb_stop_date,
      </if>
      <if test="gjjStopDate != null" >
        gjj_stop_date,
      </if>
      <if test="currentMonth != null" >
        current_month,
      </if>
      <if test="responseMsg != null" >
        response_msg,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="customerId != null" >
        #{customerId,jdbcType=BIGINT},
      </if>
      <if test="companyId != null" >
        #{companyId,jdbcType=BIGINT},
      </if>
      <if test="currentCompanyOrderId != null" >
        #{currentCompanyOrderId,jdbcType=BIGINT},
      </if>
      <if test="joinCityName != null" >
        #{joinCityName,jdbcType=VARCHAR},
      </if>
      <if test="joinCityCode != null" >
        #{joinCityCode,jdbcType=VARCHAR},
      </if>
      <if test="sbType != null" >
        #{sbType,jdbcType=VARCHAR},
      </if>
      <if test="gjjType != null" >
        #{gjjType,jdbcType=VARCHAR},
      </if>
      <if test="sbBase != null" >
        #{sbBase,jdbcType=DECIMAL},
      </if>
      <if test="gjjBase != null" >
        #{gjjBase,jdbcType=DECIMAL},
      </if>
      <if test="sbSbtBase != null" >
        #{sbSbtBase,jdbcType=DECIMAL},
      </if>
      <if test="gjjSbtBase != null" >
        #{gjjSbtBase,jdbcType=DECIMAL},
      </if>
      <if test="sbShebaotongStatus != null" >
        #{sbShebaotongStatus,jdbcType=INTEGER},
      </if>
      <if test="gjjShebaotongStatus != null" >
        #{gjjShebaotongStatus,jdbcType=INTEGER},
      </if>
      <if test="isSbKeep != null" >
        #{isSbKeep,jdbcType=INTEGER},
      </if>
      <if test="isGjjKeep != null" >
        #{isGjjKeep,jdbcType=INTEGER},
      </if>
      <if test="sbJoinDate != null" >
        #{sbJoinDate,jdbcType=DATE},
      </if>
      <if test="gjjJoinDate != null" >
        #{gjjJoinDate,jdbcType=DATE},
      </if>
      <if test="sbStopDate != null" >
        #{sbStopDate,jdbcType=DATE},
      </if>
      <if test="gjjStopDate != null" >
        #{gjjStopDate,jdbcType=DATE},
      </if>
      <if test="currentMonth != null" >
        #{currentMonth,jdbcType=DATE},
      </if>
      <if test="responseMsg != null" >
        #{responseMsg,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.xtr.api.domain.customer.CustomerShebaoBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update customer_shebao
    <set >
      <if test="customerId != null" >
        customer_id = #{customerId,jdbcType=BIGINT},
      </if>
      <if test="companyId != null" >
        company_id = #{companyId,jdbcType=BIGINT},
      </if>
      <if test="currentCompanyOrderId != null" >
        current_company_order_id = #{currentCompanyOrderId,jdbcType=BIGINT},
      </if>
      <if test="joinCityName != null" >
        join_city_name = #{joinCityName,jdbcType=VARCHAR},
      </if>
      <if test="joinCityCode != null" >
        join_city_code = #{joinCityCode,jdbcType=VARCHAR},
      </if>
      <if test="sbType != null" >
        sb_type = #{sbType,jdbcType=VARCHAR},
      </if>
      <if test="sbTypeName != null" >
        sb_type_name = #{sbTypeName,jdbcType=VARCHAR},
      </if>
      <if test="gjjType != null" >
        gjj_type = #{gjjType,jdbcType=VARCHAR},
      </if>
      <if test="gjjTypeName != null" >
        gjj_type_name = #{gjjTypeName,jdbcType=VARCHAR},
      </if>
      <if test="sbBase != null" >
        sb_base = #{sbBase,jdbcType=DECIMAL},
      </if>
      <if test="gjjBase != null" >
        gjj_base = #{gjjBase,jdbcType=DECIMAL},
      </if>
      <if test="sbSbtBase != null" >
        sb_sbt_base = #{sbSbtBase,jdbcType=DECIMAL},
      </if>
      <if test="gjjSbtBase != null" >
        gjj_sbt_base = #{gjjSbtBase,jdbcType=DECIMAL},
      </if>
      <if test="sbShebaotongStatus != null" >
        sb_shebaotong_status = #{sbShebaotongStatus,jdbcType=INTEGER},
      </if>
      <if test="gjjShebaotongStatus != null" >
        gjj_shebaotong_status = #{gjjShebaotongStatus,jdbcType=INTEGER},
      </if>
      <if test="isSbKeep != null" >
        is_sb_keep = #{isSbKeep,jdbcType=INTEGER},
      </if>
      <if test="isGjjKeep != null" >
        is_gjj_keep = #{isGjjKeep,jdbcType=INTEGER},
      </if>
      <if test="sbJoinDate != null" >
        sb_join_date = #{sbJoinDate,jdbcType=DATE},
      </if>
      <if test="gjjJoinDate != null" >
        gjj_join_date = #{gjjJoinDate,jdbcType=DATE},
      </if>
      <if test="sbStopDate != null" >
        sb_stop_date = #{sbStopDate,jdbcType=DATE},
      </if>
      <if test="gjjStopDate != null" >
        gjj_stop_date = #{gjjStopDate,jdbcType=DATE},
      </if>
      <if test="currentMonth != null" >
        current_month = #{currentMonth,jdbcType=DATE},
      </if>
      <if test="responseMsg != null" >
        response_msg = #{responseMsg,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.xtr.api.domain.customer.CustomerShebaoBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update customer_shebao
    set customer_id = #{customerId,jdbcType=BIGINT},
      company_id = #{companyId,jdbcType=BIGINT},
      current_company_order_id = #{currentCompanyOrderId,jdbcType=BIGINT},
      join_city_name = #{joinCityName,jdbcType=VARCHAR},
      join_city_code = #{joinCityCode,jdbcType=VARCHAR},
      sb_type = #{sbType,jdbcType=VARCHAR},
      sb_type_name = #{sbTypeName,jdbcType=VARCHAR},
      gjj_type = #{gjjType,jdbcType=VARCHAR},
      gjj_type_name = #{gjjTypeName,jdbcType=VARCHAR},
      sb_base = #{sbBase,jdbcType=DECIMAL},
      gjj_base = #{gjjBase,jdbcType=DECIMAL},
      sb_sbt_base = #{sbSbtBase,jdbcType=DECIMAL},
      gjj_sbt_base = #{gjjSbtBase,jdbcType=DECIMAL},
      sb_shebaotong_status = #{sbShebaotongStatus,jdbcType=INTEGER},
      gjj_shebaotong_status = #{gjjShebaotongStatus,jdbcType=INTEGER},
      is_sb_keep = #{isSbKeep,jdbcType=INTEGER},
      is_gjj_keep = #{isGjjKeep,jdbcType=INTEGER},
      sb_join_date = #{sbJoinDate,jdbcType=DATE},
      gjj_join_date = #{gjjJoinDate,jdbcType=DATE},
      sb_stop_date = #{sbStopDate,jdbcType=DATE},
      gjj_stop_date = #{gjjStopDate,jdbcType=DATE},
    current_month = #{currentMonth,jdbcType=DATE},
      response_msg = #{responseMsg,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=BIGINT}
  </update>

  <update id="updateCurrentMonth">
      update customer_shebao
      set current_month = #{orderDate},
          current_company_order_id = #{orderId}
      where
      company_id = #{companyId}
      and
      join_city_code = #{cityCode}
  </update>

  <!--批量新增员工社保公积金基本信息-->
  <insert id="insertBatch" parameterType="java.util.List">
    insert into customer_shebao (id, customer_id, company_id, current_company_order_id, join_city_name,
    join_city_code, sb_type, gjj_type, sb_base,
    gjj_base, sb_shebaotong_status, gjj_shebaotong_status,
    is_sb_keep, is_gjj_keep, sb_join_date,
    gjj_join_date, sb_stop_date, gjj_stop_date,
    current_month,
    response_msg, create_time)
    values
    <foreach collection="list" item="item" index="index" separator=",">
      (#{item.id,jdbcType=BIGINT}, #{item.customerId,jdbcType=BIGINT}, #{item.companyId,jdbcType=BIGINT}, #{item.currentCompanyOrderId,jdbcType=BIGINT}, #{item.joinCityName,jdbcType=VARCHAR},
      #{item.joinCityCode,jdbcType=VARCHAR}, #{item.sbType,jdbcType=VARCHAR}, #{item.gjjType,jdbcType=VARCHAR}, #{item.sbBase,jdbcType=DECIMAL},
      #{item.gjjBase,jdbcType=DECIMAL}, #{item.sbShebaotongStatus,jdbcType=INTEGER}, #{item.gjjShebaotongStatus,jdbcType=INTEGER},
      #{item.isSbKeep,jdbcType=INTEGER}, #{item.isGjjKeep,jdbcType=INTEGER}, #{item.sbJoinDate,jdbcType=DATE},
      #{item.gjjJoinDate,jdbcType=DATE}, #{item.sbStopDate,jdbcType=DATE}, #{item.gjjStopDate,jdbcType=DATE}, #{item.currentMonth,jdbcType=DATE},
      #{item.responseMsg,jdbcType=VARCHAR}, #{item.createTime,jdbcType=TIMESTAMP})
    </foreach>
  </insert>

  <!--批量更新员工社保公积金基本信息-->
  <update id="updateBatch" parameterType="java.util.List">
    <foreach collection="list" item="item" index="index" open="" close="" separator=";">
        update customer_shebao
        <set >
          <if test="item.customerId != null" >
            customer_id = #{item.customerId,jdbcType=BIGINT},
          </if>
          <if test="item.companyId != null" >
            company_id = #{item.companyId,jdbcType=BIGINT},
          </if>
          <if test="item.currentCompanyOrderId != null" >
            current_company_order_id = #{item.currentCompanyOrderId,jdbcType=BIGINT},
          </if>
          <if test="item.joinCityName != null" >
            join_city_name = #{item.joinCityName,jdbcType=VARCHAR},
          </if>
          <if test="item.joinCityCode != null" >
            join_city_code = #{item.joinCityCode,jdbcType=VARCHAR},
          </if>
          <if test="item.sbType != null" >
            sb_type = #{item.sbType,jdbcType=VARCHAR},
          </if>
          <if test="item.gjjType != null" >
            gjj_type = #{item.gjjType,jdbcType=VARCHAR},
          </if>
          <if test="item.sbBase != null" >
            sb_base = #{item.sbBase,jdbcType=DECIMAL},
          </if>
          <if test="item.gjjBase != null" >
            gjj_base = #{item.gjjBase,jdbcType=DECIMAL},
          </if>
          <if test="item.sbShebaotongStatus != null" >
            sb_shebaotong_status = #{item.sbShebaotongStatus,jdbcType=INTEGER},
          </if>
          <if test="item.gjjShebaotongStatus != null" >
            gjj_shebaotong_status = #{item.gjjShebaotongStatus,jdbcType=INTEGER},
          </if>
          <if test="item.isSbKeep != null" >
            is_sb_keep = #{item.isSbKeep,jdbcType=INTEGER},
          </if>
          <if test="item.isGjjKeep != null" >
            is_gjj_keep = #{item.isGjjKeep,jdbcType=INTEGER},
          </if>
          <if test="item.sbJoinDate != null" >
            sb_join_date = #{item.sbJoinDate,jdbcType=DATE},
          </if>
          <if test="item.gjjJoinDate != null" >
            gjj_join_date = #{item.gjjJoinDate,jdbcType=DATE},
          </if>
          <if test="item.sbStopDate != null" >
            sb_stop_date = #{item.sbStopDate,jdbcType=DATE},
          </if>
          <if test="item.gjjStopDate != null" >
            gjj_stop_date = #{item.gjjStopDate,jdbcType=DATE},
          </if>
          <if test="item.currentMonth != null" >
            current_month = #{item.currentMonth,jdbcType=DATE},
          </if>
          <if test="item.responseMsg != null" >
            response_msg = #{item.responseMsg,jdbcType=VARCHAR},
          </if>
          <if test="item.createTime != null" >
            create_time = #{item.createTime,jdbcType=TIMESTAMP},
          </if>
        </set>
        where id = #{item.id,jdbcType=BIGINT}
    </foreach>
  </update>

  <!--批量更新员工公积金社保的社保通返回状态-->
  <update id="updateSbAndGjjStateBatch">
    update customer_shebao
    set
    <if test="type == 1" >
      sb_shebaotong_status = #{status}
    </if>
    <if test="type == 2" >
      gjj_shebaotong_status = #{status}
    </if>
    <if test="type == 3" >
      sb_shebaotong_status = #{status},
      gjj_shebaotong_status=#{status}
    </if>
    where company_shebao_order_id = #{companyShebaoOrderId,jdbcType=BIGINT} and customer_id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item}
    </foreach>
  </update>
  <!--根据条件更新员工社保公积金的社保通状态-->
  <update id="updateSbAndGjjStateByCondition">
    update customer_shebao
    set
    <if test="type == 1" >
      sb_shebaotong_status = #{record.sbShebaotongStatus}
    </if>
    <if test="type == 2" >
      gjj_shebaotong_status = #{record.gjjShebaotongStatus}
    </if>
    where current_company_order_id = #{record.currentCompanyOrderId,jdbcType=BIGINT} and customer_id =#{record.customerId,jdbcType=BIGINT}
  </update>

  <update id="updateErrorMsg">
      update customer_shebao
      set
      response_msg = #{errorMsg}
      <if test="sbIsOk == false">
        ,sb_shebaotong_status = 4
      </if>
      <if test="gjjIsOk == false">
        ,gjj_shebaotong_status = 4
      </if>
      where
    customer_id = #{customerId}
  </update>
  <update id="updateSbtStatus">
    update customer_shebao
    SET
    <if test="sbtype == 1">
      sb_shebaotong_status = #{sbstatus}
    </if>
    <if test="sbtype == 2">
      gjj_shebaotong_status = #{sbstatus}
    </if>
    where customer_id = #{customerId}
  </update>

  <update id="upToDateCurrent">
    UPDATE customer_shebao cs
    INNER JOIN company_shebao_order cso on cs.current_company_order_id = cso.id
    SET cs.current_company_order_id = NULL,
    cs.current_month = NULL,
    cso.is_current = 0
    WHERE
    DATE_FORMAT(cso.last_time, '%Y-%m-%d') &lt; DATE_FORMAT(now(), '%Y-%m-%d')
  </update>
  <update id="updateStopCustomer">
    update
    customer_shebao sb
    set
    <if test="requireType == 1">
      sb.is_sb_keep = 0
    </if>
    <if test="requireType == 2">
      sb.is_gjj_keep = 0
    </if>
    WHERE
    sb.join_city_code = #{joinCity}
    AND sb.company_id = #{companyId}
    <if test="requireType == 1">
      AND (DATE_FORMAT(sb.sb_stop_date, '%m-%Y') = DATE_FORMAT(#{orderDate}, '%m-%Y'))
    </if>
    <if test="requireType == 2">
      AND (DATE_FORMAT(sb.gjj_stop_date, '%m-%Y') = DATE_FORMAT(#{orderDate}, '%m-%Y'))
    </if>
  </update>

  <!--清空停缴日期-->
  <update id="updateForStopDate">
    update customer_shebao
    set
    <if test="type == 1" >
      sb_stop_date = null
    </if>
    <if test="type == 2" >
      gjj_stop_date = null
    </if>
    where current_company_order_id = #{currentCompanyOrderId,jdbcType=BIGINT} and customer_id =#{customerId,jdbcType=BIGINT}
  </update>

  <!--取消停缴更新数据-->
  <update id="updateForStopDateCondition">
    update customer_shebao
    set
    <if test="type == 1" >
      sb_stop_date = null
      <if test="record.isSbKeep!=null">
        ,is_sb_keep=#{record.isSbKeep}
      </if>
      <if test="record.sbBase!=null">
        ,sb_base=#{record.sbBase}
      </if>
    </if>
    <if test="type == 2" >
      gjj_stop_date = null
      <if test="record.isGjjKeep!=null">
        ,is_gjj_keep=#{record.isGjjKeep}
      </if>
      <if test="record.gjjBase!=null">
        ,gjj_base=#{record.gjjBase}
      </if>
    </if>
    where current_company_order_id = #{record.currentCompanyOrderId,jdbcType=BIGINT} and customer_id =#{record.customerId,jdbcType=BIGINT}
  </update>


  <!--批量更新社保通状态-->
  <update id="updateSbAndGjjStateByConditionBatch">
    update customer_shebao
    set
    <if test="type == 1" >
      sb_shebaotong_status = #{shebaotongStatus}
    </if>
    <if test="type == 2" >
      gjj_shebaotong_status = #{shebaotongStatus}
    </if>
    where current_company_order_id = #{currentCompanyOrderId,jdbcType=BIGINT} and customer_id in
    <foreach collection="list" item="item" index="index" open="(" separator="," close=")">
      #{item.customerId}
    </foreach>
  </update>


  <!--批量更新员工社保公积金的社保通状态-->
  <update id="updateSbAndGjjStateByConditionForBatch">
    update customer_shebao
    <trim prefix="set" suffixOverrides=",">
      <trim prefix="sb_shebaotong_status =case" suffix="end,">
        <foreach collection="list" item="item" index="index">
          <if test="item.sbShebaotongStatus!=null and item.isType==1">
            when (current_company_order_id = #{item.currentCompanyOrderId} and  customer_id=#{item.customerId}) then #{item.sbShebaotongStatus}
          </if>
        </foreach>
      </trim>
      <trim prefix=" gjj_shebaotong_status =case" suffix="end,">
        <foreach collection="list" item="item" index="index">
          <if test="item.gjjShebaotongStatus!=null and item.isType==2">
            when (current_company_order_id = #{item.currentCompanyOrderId} and  customer_id=#{item.customerId}) then #{item.gjjShebaotongStatus}
          </if>
        </foreach>
      </trim>
    </trim>
    where
    <foreach collection="list" item="item" index="index" separator="or" >
      (current_company_order_id = #{item.currentCompanyOrderId} and  customer_id=#{item.customerId})
    </foreach>
  </update>
</mapper>