<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.reader.company.CompanySocialOrdersReaderMapper">
    <resultMap id="BaseResultMap" type="com.xtr.api.domain.company.CompanySocialOrdersBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="order_id" property="orderId" jdbcType="BIGINT"/>
        <result column="order_company_id" property="orderCompanyId" jdbcType="BIGINT"/>
        <result column="order_dep_id" property="orderDepId" jdbcType="BIGINT"/>
        <result column="order_company_member_id" property="orderCompanyMemberId" jdbcType="BIGINT"/>
        <result column="order_addtime" property="orderAddtime" jdbcType="TIMESTAMP"/>
        <result column="order_number" property="orderNumber" jdbcType="VARCHAR"/>
        <result column="order_supplier_number" property="orderSupplierNumber" jdbcType="TIMESTAMP"/>
        <result column="order_people_number" property="orderPeopleNumber" jdbcType="INTEGER"/>
        <result column="order_type" property="orderType" jdbcType="INTEGER"/>
        <result column="sh_order_count" property="shOrderCount" jdbcType="INTEGER"/>
        <result column="order_money" property="orderMoney" jdbcType="DOUBLE"/>
        <result column="order_money_server" property="orderMoneyServer" jdbcType="DOUBLE"/>
        <result column="order_supplier_money_server" property="orderSupplierMoneyServer" jdbcType="DOUBLE"/>
        <result column="order_paydate" property="orderPaydate" jdbcType="TIMESTAMP"/>
        <result column="order_citys" property="orderCitys" jdbcType="VARCHAR"/>
        <result column="order_status" property="orderStatus" jdbcType="INTEGER"/>
        <result column="order_closetime" property="orderClosetime" jdbcType="TIMESTAMP"/>
        <result column="order_detail" property="orderDetail" jdbcType="VARCHAR"/>
        <result column="order_up_excel" property="orderUpExcel" jdbcType="VARCHAR"/>
        <result column="order_up_img" property="orderUpImg" jdbcType="VARCHAR"/>
        <result column="order_err_excel" property="orderErrExcel" jdbcType="VARCHAR"/>
        <result column="order_edit_memberid" property="orderEditMemberid" jdbcType="BIGINT"/>
        <result column="order_edit_time" property="orderEditTime" jdbcType="TIMESTAMP"/>
        <result column="order_recharge_id" property="orderRechargeId" jdbcType="BIGINT"/>
        <result column="order_begin_date" property="orderBeginDate" jdbcType="TIMESTAMP"/>
        <result column="order_end_date" property="orderEndDate" jdbcType="TIMESTAMP"/>
        <result column="order_state" property="orderState" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="SocialOrdersMap" type="com.xtr.api.dto.company.CompanySocialOrdersDto" extends="BaseResultMap">
        <result column="red_money" property="redMoney" jdbcType="DECIMAL"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        order_id, order_company_id, order_dep_id, order_company_member_id, order_addtime, order_number, order_supplier_number,
        order_people_number, order_type, sh_order_count, order_money, order_money_server, order_supplier_money_server, order_paydate,
        order_citys, order_status, order_closetime, order_detail,
        order_up_excel, order_up_img, order_err_excel, order_edit_memberid,
        order_edit_time,order_recharge_id,order_begin_date,order_end_date,order_state
    </sql>

    <!-- 查询条件 -->
    <sql id="Example_Where_Clause">
        <if test="orderCompanyId != null">
            AND order_company_id=#{orderCompanyId,jdbcType=BIGINT}
        </if>
        <if test="orderType != null and orderType>0">
            AND order_type = #{orderType,jdbcType=INTEGER}
        </if>

    </sql>


    <!-- 分页查询-->
    <select id="selectPageList" resultMap="SocialOrdersMap" parameterType="com.xtr.api.domain.company.CompanySocialOrdersBean">
        SELECT
        a.*, b.receive_money as red_money
        FROM company_social_orders a
        left join red_receive b on a.order_id = b.order_id
        WHERE 1=1
        <include refid="Example_Where_Clause"/>
        ORDER BY order_addtime DESC
    </select>

    <select id="find" resultMap="BaseResultMap" parameterType="java.lang.Long">
        SELECT * FROM company_social_orders
        where order_id=#{orderId}
        limit 1
    </select>

    <select id="selectByOrderId" resultMap="SocialOrdersMap" parameterType="java.lang.Long">
        SELECT
        a.*, b.receive_money as red_money
        FROM company_social_orders a
        left join red_receive b on a.order_id = b.order_id
        WHERE order_id=#{orderId} limit 1
    </select>

    <select id="selectByOrderRechagrId" resultMap="SocialOrdersMap" parameterType="java.lang.Long">
      SELECT
        a.*, b.receive_money as red_money
        FROM company_social_orders a
        left join red_receive b on a.order_id = b.order_id
        WHERE order_recharge_id=#{orderRechagrId} limit 1
    </select>


</mapper>