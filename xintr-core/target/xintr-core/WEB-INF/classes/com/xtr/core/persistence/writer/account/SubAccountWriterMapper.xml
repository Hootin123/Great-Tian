<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xtr.core.persistence.writer.account.SubAccountWriterMapper">

    <resultMap id="BaseResultMap" type="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="cust_id" property="custId" jdbcType="BIGINT"/>
        <result column="amout" property="amout" jdbcType="DECIMAL"/>
        <result column="cash_amout" property="cashAmout" jdbcType="DECIMAL"/>
        <result column="uncash_amount" property="uncashAmount" jdbcType="DECIMAL"/>
        <result column="freeze_cash_amount" property="freezeCashAmount" jdbcType="DECIMAL"/>
        <result column="freeze_unCash_amount" property="freezeUncashAmount" jdbcType="DECIMAL"/>
        <result column="property" property="property" jdbcType="INTEGER"/>
        <result column="state" property="state" jdbcType="CHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="check_value" property="checkValue" jdbcType="VARCHAR"/>
        <result column="hash" property="hash" jdbcType="VARCHAR"/>
        <result column="is_auto_transfer" property="isAutoTransfer" jdbcType="INTEGER"/>
    </resultMap>

    <sql id="Example_Where_Clause">
        <if test="custId != null">
            AND cust_id = #{custId,jdbcType=BIGINT}
        </if>
        <if test="amout != null">
            AND amout = #{amout,jdbcType=DECIMAL}
        </if>
        <if test="cashAmout != null">
            AND cash_amout = #{cashAmout,jdbcType=DECIMAL}
        </if>
        <if test="uncashAmount != null">
            AND uncash_amount = #{uncashAmount,jdbcType=DECIMAL}
        </if>
        <if test="freezeCashAmount != null">
            AND freeze_cash_amount = #{freezeCashAmount,jdbcType=DECIMAL}
        </if>
        <if test="freezeUncashAmount != null">
            AND freeze_unCash_amount = #{freezeUncashAmount,jdbcType=DECIMAL}
        </if>
        <if test="property != null">
            AND property = #{property,jdbcType=INTEGER}
        </if>
        <if test="state != null">
            AND state = #{state,jdbcType=CHAR}
        </if>
        <if test="createTime != null">
            AND create_time = #{createTime,jdbcType=TIMESTAMP}
        </if>
        <if test="updateTime != null">
            AND update_time = #{updateTime,jdbcType=TIMESTAMP}
        </if>
        <if test="checkValue != null">
            AND check_value = #{checkValue,jdbcType=VARCHAR}
        </if>
        <if test="hash != null">
            AND hash = #{hash,jdbcType=VARCHAR}
        </if>
        <if test="isAutoTransfer != null">
            AND is_auto_transfer = #{isAutoTransfer,jdbcType=INTEGER}
        </if>
    </sql>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        id, cust_id, amout, cash_amout, uncash_amount, freeze_cash_amount, freeze_unCash_amount,
        property, state, create_time, update_time, check_value, hash,is_auto_transfer
    </sql>

    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from sub_account
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into sub_account (id, cust_id, amout,
        cash_amout, uncash_amount, freeze_cash_amount,
        freeze_unCash_amount, property, state,
        create_time, update_time, check_value,hash,is_auto_transfer
        )
        values (#{id,jdbcType=BIGINT}, #{custId,jdbcType=BIGINT}, #{amout,jdbcType=DECIMAL},
        #{cashAmout,jdbcType=DECIMAL}, #{uncashAmount,jdbcType=DECIMAL}, #{freezeCashAmount,jdbcType=DECIMAL},
        #{freezeUncashAmount,jdbcType=DECIMAL}, #{property,jdbcType=INTEGER}, #{state,jdbcType=CHAR},
        #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, #{checkValue,jdbcType=VARCHAR},
        #{hash,jdbcType=VARCHAR},#{isAutoTransfer,jdbcType=INTEGER}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into sub_account
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="custId != null">
                cust_id,
            </if>
            <if test="amout != null">
                amout,
            </if>
            <if test="cashAmout != null">
                cash_amout,
            </if>
            <if test="uncashAmount != null">
                uncash_amount,
            </if>
            <if test="freezeCashAmount != null">
                freeze_cash_amount,
            </if>
            <if test="freezeUncashAmount != null">
                freeze_unCash_amount,
            </if>
            <if test="property != null">
                property,
            </if>
            <if test="state != null">
                state,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="checkValue != null">
                check_value,
            </if>
            <if test="hash != null">
                hash,
            </if>
            <if test="hash != null">
                is_auto_transfer,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=BIGINT},
            </if>
            <if test="custId != null">
                #{custId,jdbcType=BIGINT},
            </if>
            <if test="amout != null">
                #{amout,jdbcType=DECIMAL},
            </if>
            <if test="cashAmout != null">
                #{cashAmout,jdbcType=DECIMAL},
            </if>
            <if test="uncashAmount != null">
                #{uncashAmount,jdbcType=DECIMAL},
            </if>
            <if test="freezeCashAmount != null">
                #{freezeCashAmount,jdbcType=DECIMAL},
            </if>
            <if test="freezeUncashAmount != null">
                #{freezeUncashAmount,jdbcType=DECIMAL},
            </if>
            <if test="property != null">
                #{property,jdbcType=INTEGER},
            </if>
            <if test="state != null">
                #{state,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="checkValue != null">
                #{checkValue,jdbcType=VARCHAR},
            </if>
            <if test="hash != null">
                #{hash,jdbcType=VARCHAR},
            </if>
            <if test="isAutoTransfer != null">
                #{isAutoTransfer,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update sub_account
        <set>
            <if test="custId != null">
                cust_id = #{custId,jdbcType=BIGINT},
            </if>
            <if test="amout != null">
                amout = #{amout,jdbcType=DECIMAL},
            </if>
            <if test="cashAmout != null">
                cash_amout = #{cashAmout,jdbcType=DECIMAL},
            </if>
            <if test="uncashAmount != null">
                uncash_amount = #{uncashAmount,jdbcType=DECIMAL},
            </if>
            <if test="freezeCashAmount != null">
                freeze_cash_amount = #{freezeCashAmount,jdbcType=DECIMAL},
            </if>
            <if test="freezeUncashAmount != null">
                freeze_unCash_amount = #{freezeUncashAmount,jdbcType=DECIMAL},
            </if>
            <if test="property != null">
                property = #{property,jdbcType=INTEGER},
            </if>
            <if test="state != null">
                state = #{state,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="checkValue != null">
                check_value = #{checkValue,jdbcType=VARCHAR},
            </if>
            <if test="hash != null">
                hash = #{hash,jdbcType=VARCHAR},
            </if>
            <if test="isAutoTransfer != null">
                is_auto_transfer = #{isAutoTransfer,jdbcType=INTEGER},
            </if>
        </set>
        where id = #{id,jdbcType=BIGINT}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.xtr.api.domain.account.SubAccountBean">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update sub_account
        set cust_id = #{custId,jdbcType=BIGINT},
        amout = #{amout,jdbcType=DECIMAL},
        cash_amout = #{cashAmout,jdbcType=DECIMAL},
        uncash_amount = #{uncashAmount,jdbcType=DECIMAL},
        freeze_cash_amount = #{freezeCashAmount,jdbcType=DECIMAL},
        freeze_unCash_amount = #{freezeUncashAmount,jdbcType=DECIMAL},
        property = #{property,jdbcType=INTEGER},
        state = #{state,jdbcType=CHAR},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        update_time = #{updateTime,jdbcType=TIMESTAMP},
        hash = #{hash,jdbcType=VARCHAR},
        is_auto_transfer = #{isAutoTransfer,jdbcType=INTEGER},
        check_value = #{checkValue,jdbcType=VARCHAR}
        where id = #{id,jdbcType=BIGINT}
    </update>


    <!-- 更新账户余额自动控制-->
    <update id="updateAutoTransfer">
        UPDATE sub_account set is_auto_transfer = #{isAutoTransfer,jdbcType=INTEGER}
        where cust_id = #{custId,jdbcType=BIGINT} and property = #{property,jdbcType=INTEGER}
    </update>

    <!--批量插入员工账户-->
    <insert id="insertBatch" parameterType="java.util.List">
        insert into sub_account (id, cust_id, amout,
        cash_amout, uncash_amount, freeze_cash_amount,
        freeze_unCash_amount, property, state,
        create_time, update_time, check_value,hash,is_auto_transfer
        )
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.id,jdbcType=BIGINT}, #{item.custId,jdbcType=BIGINT}, #{item.amout,jdbcType=DECIMAL},
            #{item.cashAmout,jdbcType=DECIMAL}, #{item.uncashAmount,jdbcType=DECIMAL}, #{item.freezeCashAmount,jdbcType=DECIMAL},
            #{item.freezeUncashAmount,jdbcType=DECIMAL}, #{item.property,jdbcType=INTEGER}, #{item.state,jdbcType=CHAR},
            #{item.createTime,jdbcType=TIMESTAMP}, #{item.updateTime,jdbcType=TIMESTAMP}, #{item.checkValue,jdbcType=VARCHAR},
            #{item.hash,jdbcType=VARCHAR},#{item.isAutoTransfer,jdbcType=INTEGER})
        </foreach>
    </insert>

    <!-- 根据客户Id获取账户信息-->
    <select id="selectByCustId" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sub_account
        where cust_id = #{custId,jdbcType=BIGINT} AND property = #{property,jdbcType=INTEGER} limit 1
    </select>

    <!--根据custId查询账户信息-->
    <select id="selectSubAccountBean" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>
        from sub_account
        where 1=1
        <include refid="Example_Where_Clause"/>
    </select>
</mapper>